<template>

  <div id="buttons-zone" class="btn-group">
    <button type="button" class="btn btn-outline-primary btn-sm" click.trigger="solitaire.save()" show.bind="solitaire.isNotFinished">Save</button>
    <button type="button" class="btn btn-outline-primary btn-sm" click.trigger="solitaire.reset()">Reset</button>
    <button type="button" class="btn btn-outline-secondary btn-sm" click.trigger="solitaire.quit()">Quit</button>
  </div>
  <h4>${solitaire.user.score}</h4>
  <div id="solitaire-game" class="playingCards container-background" show.bind="solitaire.isNotFinished">
    <div id="solitaire-top">
      <!-- -->
      <span id="solitaire-stub">
        <ul class="deck deck-clickable" click.trigger="solitaire.turnStub()">
          <li repeat.for="card of solitaire.stub.returnedCards" class="card-slot">
            <compose view="../templates/card.html" containerless></compose>
          </li>
        </ul>
      </span>

      <span id="solitaire-returned-stub">
        <ul class="deck deck-clickable">
          <li repeat.for="card of solitaire.stub.cards" class="card-slot" click.trigger="solitaire.moveCard($index, 0, solitaire.zones.stub)">
            <compose view="../templates/card.html" containerless></compose>
          </li>
        </ul>
      </span>

      <span id="solitaire-king-slots">
        <ul repeat.for="i of 4" class="deck deck-clickable" click.trigger="solitaire.moveCard(-1, i, solitaire.zones.kingSlots)">
          <li repeat.for="card of solitaire.kingSlots[i].cards" class="card-slot" click.trigger="solitaire.setSelectedCardIndex($index)">
            <compose view="../templates/card.html" containerless></compose>
          </li>
        </ul>
      </span>
    </div>
    <div id="solitaire-bottom">
      <span id="solitaire-slots">
        <ul repeat.for="i of 7" class="cards-column" click.trigger="solitaire.moveCard(-1, i, solitaire.zones.slots)">
          <li repeat.for="card of solitaire.slots[i].cards" class="card-slot" click.trigger="solitaire.setSelectedCardIndex($index)">
            <compose view="../templates/card.html" containerless></compose>
          </li>
        </ul>
      </span>
    </div>
  </div>
  <h2 show.bind="!solitaire.isNotFinished">FINISHED !<h2>
</template>
